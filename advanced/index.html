<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GraalVM | ES for Eclipse Vert.x</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="shortcut icon" type="image/png" href="/es4x/favicon.png">
    <link rel="stylesheet" type="text/css" href="/es4x/player/asciinema-player.css">
    <script src="/es4x/player/asciinema-player.js"></script>
    <meta name="description" content="A Modern JavaScript runtime for Eclipse Vert.x">
    <link rel="preload" href="/es4x/assets/css/0.styles.682941bf.css" as="style"><link rel="preload" href="/es4x/assets/js/app.743b1bf3.js" as="script"><link rel="preload" href="/es4x/assets/js/2.fb19970f.js" as="script"><link rel="preload" href="/es4x/assets/js/12.4b1b906a.js" as="script"><link rel="prefetch" href="/es4x/assets/js/10.660fc818.js"><link rel="prefetch" href="/es4x/assets/js/11.51e065a1.js"><link rel="prefetch" href="/es4x/assets/js/13.e6ccce96.js"><link rel="prefetch" href="/es4x/assets/js/14.0f76fb30.js"><link rel="prefetch" href="/es4x/assets/js/15.2bf3036b.js"><link rel="prefetch" href="/es4x/assets/js/16.650d3ce4.js"><link rel="prefetch" href="/es4x/assets/js/17.8fb447c5.js"><link rel="prefetch" href="/es4x/assets/js/18.1114d5ca.js"><link rel="prefetch" href="/es4x/assets/js/19.99b042c3.js"><link rel="prefetch" href="/es4x/assets/js/20.ba307bf8.js"><link rel="prefetch" href="/es4x/assets/js/21.9555450f.js"><link rel="prefetch" href="/es4x/assets/js/22.047f64e6.js"><link rel="prefetch" href="/es4x/assets/js/23.f80e8698.js"><link rel="prefetch" href="/es4x/assets/js/24.5a8a4686.js"><link rel="prefetch" href="/es4x/assets/js/25.c6e79174.js"><link rel="prefetch" href="/es4x/assets/js/26.2eb6ae27.js"><link rel="prefetch" href="/es4x/assets/js/27.a25a218c.js"><link rel="prefetch" href="/es4x/assets/js/28.72c5c987.js"><link rel="prefetch" href="/es4x/assets/js/29.e208b0e5.js"><link rel="prefetch" href="/es4x/assets/js/3.5be0044a.js"><link rel="prefetch" href="/es4x/assets/js/30.8828475f.js"><link rel="prefetch" href="/es4x/assets/js/31.6582cec6.js"><link rel="prefetch" href="/es4x/assets/js/32.3cfa42c0.js"><link rel="prefetch" href="/es4x/assets/js/33.d5834596.js"><link rel="prefetch" href="/es4x/assets/js/34.301f0117.js"><link rel="prefetch" href="/es4x/assets/js/35.f44c596a.js"><link rel="prefetch" href="/es4x/assets/js/36.d94a5d47.js"><link rel="prefetch" href="/es4x/assets/js/37.f87b62bc.js"><link rel="prefetch" href="/es4x/assets/js/38.f6b4d40f.js"><link rel="prefetch" href="/es4x/assets/js/39.cb7861e0.js"><link rel="prefetch" href="/es4x/assets/js/4.9f5f2f07.js"><link rel="prefetch" href="/es4x/assets/js/40.1ad446d4.js"><link rel="prefetch" href="/es4x/assets/js/41.40c60634.js"><link rel="prefetch" href="/es4x/assets/js/42.6d05d061.js"><link rel="prefetch" href="/es4x/assets/js/43.a06657dc.js"><link rel="prefetch" href="/es4x/assets/js/5.2f4b890c.js"><link rel="prefetch" href="/es4x/assets/js/6.5a424009.js"><link rel="prefetch" href="/es4x/assets/js/7.15629bf9.js"><link rel="prefetch" href="/es4x/assets/js/8.30ed4b1a.js"><link rel="prefetch" href="/es4x/assets/js/9.8bf611cc.js">
    <link rel="stylesheet" href="/es4x/assets/css/0.styles.682941bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/es4x/" class="home-link router-link-active"><!----> <span class="site-name">ES for Eclipse Vert.x</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/es4x/get-started/" class="nav-link">
  Get started
</a></div><div class="nav-item"><a href="/es4x/advanced/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Advanced
</a></div><div class="nav-item"><a href="/es4x/examples/" class="nav-link">
  Examples
</a></div><div class="nav-item"><a href="/es4x/api/" class="nav-link">
  APIs
</a></div><div class="nav-item"><a href="https://github.com/reactiverse/es4x/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/es4x/advanced/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/es4x/zh/advanced/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/es4x/pt/" class="nav-link">
  Português
</a></li></ul></div></div> <a href="https://github.com/reactiverse/es4x" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/es4x/get-started/" class="nav-link">
  Get started
</a></div><div class="nav-item"><a href="/es4x/advanced/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Advanced
</a></div><div class="nav-item"><a href="/es4x/examples/" class="nav-link">
  Examples
</a></div><div class="nav-item"><a href="/es4x/api/" class="nav-link">
  APIs
</a></div><div class="nav-item"><a href="https://github.com/reactiverse/es4x/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/es4x/advanced/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/es4x/zh/advanced/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/es4x/pt/" class="nav-link">
  Português
</a></li></ul></div></div> <a href="https://github.com/reactiverse/es4x" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/es4x/advanced/" aria-current="page" class="active sidebar-link">GraalVM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es4x/advanced/#differences-to-nashorn" class="sidebar-link">Differences to Nashorn</a></li><li class="sidebar-sub-header"><a href="/es4x/advanced/#threading" class="sidebar-link">Threading</a></li><li class="sidebar-sub-header"><a href="/es4x/advanced/#native-images" class="sidebar-link">Native Images</a></li></ul></li><li><a href="/es4x/advanced/commonjs.html" class="sidebar-link">CommonJS Modules</a></li><li><a href="/es4x/advanced/esm.html" class="sidebar-link">EcmaScript Modules</a></li><li><a href="/es4x/advanced/globals.html" class="sidebar-link">Globals</a></li><li><a href="/es4x/advanced/vertx.html" class="sidebar-link">Eclipse Vert.x</a></li><li><a href="/es4x/advanced/worker.html" class="sidebar-link">Workers</a></li><li><a href="/es4x/advanced/jars.html" class="sidebar-link">JARs</a></li><li><a href="/es4x/advanced/security.html" class="sidebar-link">Security Policy</a></li><li><a href="/es4x/advanced/logging.html" class="sidebar-link">Logging</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="graalvm"><a href="#graalvm" class="header-anchor">#</a> GraalVM</h1> <p>ES4X uses GraalVM, however the same code will run either in <strong>interpreted</strong> mode on Java 8, 9, 10 and OpenJ9.</p> <p>For JDK &gt;= 11 (with JVMCI support) or GraalVM ES4X runs in <strong>compiled</strong> mode.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>In order words, please use Java &gt;= 11 or GraalVM.</p></div> <p>There are benefits on using GraalJS namely the updated language support &gt;=ES6 and support out of the box for generators,
promises, etc....</p> <h2 id="differences-to-nashorn"><a href="#differences-to-nashorn" class="header-anchor">#</a> Differences to Nashorn</h2> <p>Unlike <code>Nashorn</code>, <code>GraalJS</code> <em>java</em> interop follows the <strong>exact</strong> class/method name from Java. For example, the usage of
property names to refer to getters and setters, must use the <em>getter</em> and <em>setter</em>. For example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>When using this Java Object from Graal, this will not work:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> hello <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// get the name</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> hello<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// FAIL</span>
<span class="token comment">// set the name</span>
hello<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Paulo'</span><span class="token punctuation">;</span>  <span class="token comment">// FAIL</span>
</code></pre></div><p>This is not valid in Graal and should be:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> hello <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// get the name</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> hello<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// set the name</span>
hello<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Paulo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="threading"><a href="#threading" class="header-anchor">#</a> Threading</h2> <p>GraalJS is very strict with only a single thread on the JS context at a time. When working with only Asynchronous Vert.x
APIs this shall not be an issue. However other libraries can cause problems. To avoid this limitation, it is advised to
use the <code>Worker</code> API or the <code>EventBus</code>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>GraalJS will not allow multi thread access to the same script context. If there is a need to work with multiple
threads, then consider looking at the <a href="./worker">Worker API</a>.</p></div> <h2 id="native-images"><a href="#native-images" class="header-anchor">#</a> Native Images</h2> <p>Currently you cannot generate native images with ES4X, the limitation is because the static analysis of the AOT compiler
will not take in consideration the java code invoked from the script (so classes won't be available), plus the fact that
the compiler has no support for jvm interop at runtime.</p> <p>There is work in progress in this area so it might be possible in the future.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/reactiverse/es4x/edit/develop/docs/advanced/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/1/2020, 2:27:28 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/es4x/advanced/commonjs.html">
        CommonJS Modules
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/es4x/assets/js/app.743b1bf3.js" defer></script><script src="/es4x/assets/js/2.fb19970f.js" defer></script><script src="/es4x/assets/js/12.4b1b906a.js" defer></script>
  </body>
</html>
